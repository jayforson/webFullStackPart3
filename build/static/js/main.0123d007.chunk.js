(this["webpackJsonppart2-exercises-phonebook"]=this["webpackJsonppart2-exercises-phonebook"]||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t(15),a=t.n(c),i=t(6),o=t(3),u=t(4),s=t.n(u),f="./api/persons",d=function(){return s.a.get(f).then((function(e){return e.data}))},b=function(e){return s.a.post(f,e).then((function(e){return e.data}))},j=function(e,n){return s.a.put("".concat(f,"/").concat(e),n).then((function(e){return e.data}))},l=function(e){return s.a.delete("".concat(f,"/").concat(e))},m=t(0),h=function(e){var n=e.notification;return null==n?null:Object(m.jsx)("div",{className:n.type,children:n.message})},p=function(e){var n=e.value,t=e.onChange;return Object(m.jsxs)("div",{children:["filter shown with ",Object(m.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.name,t=e.number,r=e.onNameChange,c=e.onNumberChange,a=e.onSubmit;return Object(m.jsxs)("form",{onSubmit:a,children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:n,onChange:r})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:t,onChange:c})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.persons,t=e.onClick;return Object(m.jsx)("div",{children:n.map((function(e){return Object(m.jsxs)("div",{children:[e.name," ",e.number,Object(m.jsx)("button",{onClick:t(e),children:"delete"})]},e.id)}))})},x=function(){var e=Object(r.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(""),u=Object(o.a)(a,2),s=u[0],f=u[1],x=Object(r.useState)(""),g=Object(o.a)(x,2),C=g[0],w=g[1],k=Object(r.useState)(""),S=Object(o.a)(k,2),y=S[0],N=S[1],U=Object(r.useState)(null),D=Object(o.a)(U,2),E=D[0],J=D[1];Object(r.useEffect)((function(){d().then((function(e){c(e)}))}),[]);var P=""===y?t:t.filter((function(e){return e.name.toUpperCase().includes(y.toUpperCase())})),A=function(e,n){J({message:e,type:n}),setTimeout((function(){J(null)}),1e4)};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),Object(m.jsx)(h,{notification:E}),Object(m.jsx)(p,{value:y,onChange:function(e){N(e.target.value)}}),Object(m.jsx)("h3",{children:"add a new"}),Object(m.jsx)(O,{name:s,number:C,onNameChange:function(e){f(e.target.value)},onNumberChange:function(e){w(e.target.value)},onSubmit:function(e){if(e.preventDefault(),""!==C){var n=t.find((function(e){return e.name.toUpperCase()===s.toUpperCase()}));if(n){if(window.confirm(s+" is already added to phonebook, replace the old number with a new one?")){var r=Object(i.a)(Object(i.a)({},n),{},{number:C});j(n.id,r).then((function(e){c(t.map((function(t){return t.id!==n.id?t:e}))),A("Updated "+e.name,"notification")})).catch((function(e){c(t.filter((function(e){return e.id!==n.id}))),A("information of "+n.name+" has already been removed from server","error")}))}}else b({name:s,number:C}).then((function(e){c(t.concat(e)),A("Added "+e.name,"notification")})).catch((function(e){A(e.response.data.error,"error")})),f(""),w("")}else window.alert("Please input the number")}}),Object(m.jsx)("h2",{children:"Numbers"}),Object(m.jsx)(v,{persons:P,onClick:function(e){return function(){window.confirm("Delete "+e.name+"?")&&l(e.id).then((function(n){c(t.filter((function(n){return n.name!==e.name}))),A("removed "+e.name,"notification")})).catch((function(n){c(t.filter((function(n){return n.name!==e.name}))),A("information of "+e.name+" has already been removed from server","error")}))}}})]})};t(39);a.a.render(Object(m.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.0123d007.chunk.js.map